Анализ предметной области:

Распишем, что из каждого пункта можно выявить за требования и исходя из этого будем работать дальше. 

1. Интернет-магазин должен иметь веб-интерфейс, но он должен иметь возможность подключения через другие интерфейсы 
(веб-сервисы и т.п.)
    * Использовать API для получения/загрузки данных

2. Интернет-магазин предназначен для продажи книг, с оплатой заказов через интернет.
    * Использовать плаженый API сервис. Paypal 

3. Пользователь должен иметь возможность добавить книги в онлайн корзину, после чего произвести оплату.
	* Пользователь может убрать предметы из корзины. 

		* Надо прикреплять (ассоциировать) сессию к пользователю. Нужно сохранять ее id, при храним информацио о корзине пользователя и время последнего пользования ей. Чтобы не хранить не нужные статые корзины, храним только с самым свежим временем.

4. Пользователь должен иметь возможность вести списки желаемых покупок, т.е. книг, которые он хочет купить позже. 

	* Нужна авторизация, чтобы вести списки для каждого пользователя. 
		* Если пользователь зарегестрирован, то информация о корзине должна будет ассоциироваться с пользователем, а не с сессией. 

5. Пользователь должен иметь возможность отменить заказ до того, как он отправлен по почте.

	* Нужно держать статус для заказа, для поддержания активных списков заказов.

6. Пользователь должен иметь возможность оплатить заказ кредитной картой или по счету на оплату. 
	
	* Используем PayPal сервис.

7. Должна быть возможность вернуть книги. 

	* Храним еще все выполненные заказы.

8. Интернет-магазин должен встраиваться на сайты партнеров в виде мини-каталога, который составляется по основному каталогу, 
хранящемуся в центральной базе данных.
	* Мини-каталог должен быть построен на основе XML для того, чтобы была возможность передавать его между системами.

		* Венесем часть API на внешний уровень и зафиксируем интерфейс.


9. Пользователь должен иметь возможность создать учетную запись клиента, чтобы система запоминала данные пользователя 
(имя, адрес, данные банковской карты и т.д.) и восстанавливала их при входе.
	* Система должна вести основной список учетных записей в центральной базе данных. 

		* Создадим сервис, который будет это выполнять

	* При входе пользователя его пароль должен сверяться с паролем в основном списке паролей, сохраненным в базе данных. 

		* Будем хранить пароли-хэши в базе данных.


10. Пользователь должен иметь возможность искать книги различными способами поиска – по заголовку, по автору, ключевому 
слову или категории и после поиска просматривать детальное описание книги. 

	* В БД такой поиск будет выполнять долго. Но название книги и её метаинформация постоянна, можно использовать elasticsearch. 

11. Пользователь должен иметь возможность оставлять отзывы на понравившиеся книги. Оставленные отзывы должны появляться в 
детальном описании книги. Отзыв должен включать выставленный клиентом рейтинг (1-5), который должен показываться вместе с 
заголовком книги в списке книг.
	* Отзывы на книгу должны модерироваться, т.е. им должен рисваиваться статус Ok кем-то из администраторов прежде, чем они появятся на сайте.

		* Создадим в СУБД новые страницы для создания новых отзывов
  
  	* Длинные отзывы должны обрезаться при выводе детального описания книги. Клиент может щелкнуть по отзыву, чтобы просмотреть полный отзыв на отдельной странице.

		* Уже углубление в реализацию окна для пользователя.


12. Должна быть возможность размещения администраторами редакторских отзывов. Они также должны появляться на странице с 
детальным описанием книги. 

	* Создадим в БД дополительный флаг - отзыв редакторский.


13. Интернет-магазин должен позволять сторонним продавцам (например, магазинам подержанных книг) добавлять свои каталоги 
книг в основной каталог книг, так чтобы книги этих продавцов присутствовали в результатах поиска. 

	* Надо дать возможность выбирать пользователю, показывать такие книги или нет.


14. Интернет-магазин должен быть масштабируем со следующими требованиями:
  	* Должна быть возможность управлять до 100 тыс. учетных записей пользователей за первые 6 месяцев работы и затем до 1 млн. пользователей.

    	* Можно индексировать в БД по почте или логину. 

  	* Должна быть возможность обслуживать одновременно 1000 посетителей (до 10000 тысяч после 6 месяцев)
		
		* Одного сервера должно хватить 

 	 * Система должна обслуживать 100 поисковых запросов в минуту (1 тыс./мин. после 6 месяцев)
    
    	* elasticsearch должно хватить

  	* Система должна обслуживать 100 покупок в час (1 тыс./час после 6 мес.)

    	* PayPal должно хватить

**Итого** разбиваем на части:
* Отдельные сервисы с:
	* зарегестрированными пользователями и их сессиями
	* сессий
	* книгами и отзывами
	* поиском
	* заказом
	* платежем

